# qmm todo
    - check all quests starting value [xxx]
    + location visit limit
    + img/sound/track at location, jump, critparam
    - check changes from https://snk-games.net/forums/viewtopic.php?p=170414?p=170414
        - check params always, not only at change
        - [d1], [d1:2] 
    - check all quests for locationVisitLimit
    
# qmplayer
	+ Seedable random
	
# Веб версия
    + serviceWorker установка сделать прилично
    + Установку вынести в отдельный view
        + Отдельные кнопки чтобы класть в кэш музыку и картинки
   
    - Включаемый фон из оригинальной игры
    + Редактирование имени рейнджера

    - Комменты от VK под каждым квестом?
	
    + ios safari no music (wontfix)
    + img 343 * 392
    + Header: Имя, Сначала, Музыка, Выход
    + сохрпнение проверка имени квеста
    + загрузка - полностью менять вид на главной
    + перенести тесты в папку tests, сделать player-test на mocha
    + text-success для <clr> (синий похож на ссылку)    
    + Начальная загрузка поменять
    + img transition
    + img preload не работает похоже
    + вытащить задание и показывать его в главном меню в описании. Сделать max-height на каждый item
    + TGE 4.3, попытаться разобрать формат новых квестов (где 96 параметров)   
    + недоступные квесты всё равно кликаются    
    + показывать сложность внизу на списке <small>
    + увеличить интервал между вариантами (что с мобильного не ткнуть куда не надо)
    + добавить margin на статус регистров (чтобы с мобильного смотрелось)
    + сделать билд на gitlab ci (.gitlab-ci.yml), убрать web-build из репозитория        
    + квест codebox посмотреть на форматирование + как формулы работают
    + megatest: будет ли стартовая локация
    + если нет картинки - то случайную из начинающихся на имя
    + картинка с мобильного
    + <CurDate>
    + <fix>
    + mobile audio tag    
    + вынести QMPlayer.replace как модуль и сделать авто-тест на него - пройтись по всем qm файлам и применить (если локации/переход криттекст == квест.критекст, то можно не проверять)
    + Пустая локация, но не пустой переход? TGE показывает пустой текст в локации
    (Переходы также могут быть пустыми. Пустой переход можно создать, полностью удалив (если он был) текст из текстового поля “Вопрос для совершения перехода”. Такой “переход без вопроса” выполняется самостоятельно, без участия игрока, если все обычные переходы с вопросами недоступны или их нет. Текст локации, из которой выходит пустой переход, игнорируется. Пустые переходы можно использовать в сложных по структуре квестах, когда требуется пройти несколько локаций одним кликом. Пустые переходы, как и обычные, могут иметь описания.)
    + Доделать тесты в test2 (пустая локация/переход)
    + href-ссылки для квестов
    + GameList constructor: сделать по-нормальному через async/await
    + GameList: загрузка с анимацией, если Exception - то так и написать
	+ PQI.txt распарсить и добавить 
	
	+ Если переход ведёт в локацию из которой нет переходов доступных по количеству, то TGE не показывает такой переход (даже если стоит всегда показывать)
		Причем если нет совсем переходов - то можно попасть
		Нельзя попасть даже если локация/переход стригеррит критичный параметр
    + Разобраться почему не читает qm из игры, а читает только с TGE 4.3 (где-то чего-то не хватает) 
    + <format=X,Y>  Если выравнивание по правому краю, то пробелы добавляются слева, если по левому, то справа. Если по центру, то с обеих сторон. Если дополнительно использовать тег fix, то можно таким образом формировать колонки таблиц.    
	
               
    + offline версия через service worker (загрузить все из index.json)       
    
    - http://www.rilarhiv.ru/tge2.htm - добавить квесты оттуда

    - проверить квесты на Exception случайно по каждому переходу (большой и долгий цикл)
    
    - поискать квесты где есть переходы с допустимыми критичными значениями на fail и dead
    
    - https://snk-games.net/forums/viewtopic.php?p=170414?p=170414 TGE 5.2
       
#Заголовки файлов
- D3353A42 - (У5) tge 4.2.5    48 параметров
- D2... - (T5) старый, конвертируемый    24 параметра
- C8.... - (И5) старый, конвертируемый, хз что там, такой только Gladiator
- D4.... - новый неконвертируемый (см TGE_4_3) 96 параметров

# (картинка)
L, 1, 5, 15, 23, 24, 25
P, 2, 3, 77
PAR, 10
Это означает, что в игре данная картинка будет появляться при достижении игроком локаций 1, 5, 15, 23, 24 или 25, преходов 2, 3 или 77, а также в случае достижения параметром [p10] своего критического значения.
0 - стартовая

#TODO:
+ пустой переход
+ перемешать переходы с одним приоритетом

#Последняя версия с qm 35/2.1.2121

#Состояния
- Читает описание задания
- На локации
    -На локации после перехода (если она пустая, то показывается тест перехода)
- На переходе (читает текст перехода и видит "Далее")
- Случился критичный параметр на переходе
- Случился критичный парамерт на локации
- Читает поздравление

Параметры меняются до начала перехода, проверяются после (после текста на переходе)

Если критичный параметр стал на локации, то:
    если нет доступных других переходов
        - текст локации == текст критичного
        - только один переход "Далее" 
    иначе всё как обычно
    ( Если есть доступные переходы, то критичного действия не происходит. )
Критичные значение проверяются если условия поменяли параметр
На переходе критичный параметр срабатывает всегда

На финальной локации нет переходов кроме как "Вернуться на планету"

#Параметры:
Сами параметры 1-48 (если деньги, то 2000 начальное): значение ; показывается ли
По каждому переходу: сколько был пройден раз; рандомность
По каждой локации: номер показываемого текста (пустые игнор.)
Сколько дней прошло
?Рандомный переход считается на момент открытия локации,

#Наблюдения
- Параметры целые, +33% много раз не сделает из 1 -> 2

#
crit on location empty: jumptext -> critmsg
crit on ordinary      : 
